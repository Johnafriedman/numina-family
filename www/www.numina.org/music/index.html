<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Music</title>
</head>
<body>

<script type="module" >
    import songs from "./allSongs.js"

    const songTemp =
        '<div>' +
            '<div><%title%></div>' +
            '<div><%description%></div>' +
            '<audio controls>' +
                '<source src="https://docs.google.com/uc?authuser=0&id=<%sourceId%>&export=download" type="audio/mpeg">' +
            '</audio>';

    let allSongsDiv = document.createElement("div");
    songs.forEach(function(currentValue){
        let songStr=songTemp;

        Object.entries(currentValue).forEach(entry => {
            const [key, value] = entry;
            const re = new RegExp("<%"+key+"%>");
            songStr = songStr.replace(re, value);
        });


        let songDiv = document.createElement("div");
        songDiv.innerHTML = songStr;
        allSongsDiv.append(songDiv);
    });

    onload = function(){
        this.document.body.append(allSongsDiv);
    }
</script>

</body>
</html>